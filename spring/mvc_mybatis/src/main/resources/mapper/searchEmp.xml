<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.chunjae.mvc_mybatis.dao.SearchEmpMapper">
    <select id="totalCount" parameterType="hashmap" resultType="int">
        select count(*)
        from temp2
        <where>
            <if test="search_txt!=null and !search_txt.equals('')">
                <choose>
                    <when test="search.equals('employee_id')">
                        and employee_id = #{search_txt}
                    </when>
                    <when test="search.equals('first_name')">
                        and first_name like concat('%',#{search_txt},'%')
<!--                        and lower(first_name) like CONCAT('%',LOWER('a'),'%') -->
                    </when>
                    <otherwise>
                        and department_name like concat('%',#{search_txt},'%')
                    </otherwise>
                </choose>
            </if>
        </where>
    </select>
</mapper>